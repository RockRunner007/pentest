#!/bin/bash

# GCP
# https://cloud.google.com/sdk/gcloud/reference/asset/search-all-resources

gcloud asset search-all-resources \
--scope='projects/'$1 \
--asset-types='compute.googleapis.com/ForwardingRule,compute.googleapis.com/Instance,compute.googleapis.com/Address' \
--format='csv(displayName,name,project,assetType,additionalAttributes.IPAddress,additionalAttributes.address,additionalAttributes.externalIPs[].list())' > artifacts/size_gcp.txt