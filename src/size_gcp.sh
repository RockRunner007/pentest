#!/bin/bash

# GCP
# https://cloud.google.com/sdk/gcloud/reference/asset/search-all-resources

# IP List
gcloud asset search-all-resources \
--scope='projects/'$1 \
--asset-types='compute.googleapis.com/ForwardingRule,compute.googleapis.com/Instance,compute.googleapis.com/Address' \
--format='csv(displayName,name,project,assetType,additionalAttributes.IPAddress,additionalAttributes.address,additionalAttributes.externalIPs[].list())' > artifacts/audit/size_gcp_$1.txt

# All resources per project
# gcloud asset search-all-resources --scope 'projects/fivetran-inventory' --format 'csv(name, assetType, project, location)'  > artifacts/audit/resources_gcp_$1.txt
